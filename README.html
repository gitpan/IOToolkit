<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>IOToolkit.pm</title>
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#version">VERSION</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#abstract">ABSTRACT</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<ul>

		<li><a href="#export">EXPORT</a></li>
	</ul>

	<li><a href="#see_also">SEE ALSO</a></li>
	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#copyright_and_license">COPYRIGHT AND LICENSE</a></li>
	<li><a href="#amendment_history">AMENDMENT HISTORY</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>IOToolkit</p>
<p>
</p>
<hr />
<h1><a name="version">VERSION</a></h1>
<p>$Revision:   1.21  $</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p>Sample Script:</p>
<pre>
    use strict;
    use warnings;
    use Getopt::Long;                 # processing command-line parameters
    use IOToolkit;</pre>
<pre>
    package main; 
    use vars qw($getopt_loglevel $program $programname);</pre>
<pre>
    my $program = $0;                   # Script Name with path
    $program =~ m/\/(.+)/i;             # Only the scriptname
    $programname = $1;  
    $program =~ m/(.+)\.pl/i;           # Without the extension
    $program = $1;</pre>
<pre>
    my $logfilename = $program.&quot;.log&quot;;
    my $VERSION = &quot;1.00&quot;;
    my $description = &quot;Description goes here&quot;;</pre>
<pre>
    GetOptions(&quot;loglevel=s&quot; =&gt; \$getopt_loglevel);</pre>
<pre>
    if (not(defined($getopt_loglevel))) {
       print &quot;$description ($programname)\n&quot;;
       print &quot;Usage: \n$programname\n --loglevel=EMCDQ\n\n&quot;;
       die &quot;You did not provide any parameters. The program ended here.\n\n&quot;;
    }</pre>
<pre>
    #logme(&quot;open&quot;);                     # uses a default filename scriptname.log in the same dir
    logme(&quot;open&quot;,$logfilename);
    logme(&quot;D&quot;,&quot;$programname V$VERSION started --------------------------------------------------&quot;);
    logme(&quot;M&quot;,&quot;This is a MESSAGE&quot;);
    logme(&quot;D&quot;,&quot;This is a DEBUG-MESSAGE&quot;);
    logme(&quot;E&quot;,&quot;This is an ERROR-MESSAGE&quot;);
    logme(&quot;Q&quot;,&quot;This is a SQL-QUERY-MESSAGE&quot;);
    logme(&quot;C&quot;,&quot;This is a CONFIGURATION-MESSAGE&quot;);
    logme(&quot;M&quot;,&quot;FATAL- and SYSTEM-MESSAGES (F/S) are always logged.&quot;);
    logme(&quot;M&quot;,&quot;If the loglevel parameter contains - no messages are displayed.&quot;);
    #logme(&quot;F&quot;,&quot;This is a FATAL-MESSAGE which lets the program die&quot;);
    logme(&quot;D&quot;,&quot;$programname V$VERSION ended   --------------------------------------------------&quot;);
    logme(&quot;close&quot;);</pre>
<p>This displays and creates a logfile like this:</p>
<pre>
    2004-09-09 10:23:57 [logging.pl] &lt;D&gt; logging.pl V1.00 started --------------------------------------------------
    2004-09-09 10:23:57 [logging.pl] &lt;M&gt; This is a MESSAGE
    2004-09-09 10:23:57 [logging.pl] &lt;D&gt; This is a DEBUG-MESSAGE
    2004-09-09 10:23:57 [logging.pl] &lt;E&gt; This is an ERROR-MESSAGE
    2004-09-09 10:23:57 [logging.pl] &lt;Q&gt; This is a SQL-QUERY-MESSAGE
    2004-09-09 10:23:57 [logging.pl] &lt;C&gt; This is a CONFIGURATION-MESSAGE
    2004-09-09 10:23:57 [logging.pl] &lt;M&gt; FATAL- and SYSTEM-MESSAGES (F/S) are always logged.
    2004-09-09 10:23:57 [logging.pl] &lt;M&gt; If the loglevel parameter contains - no messages are displayed.
    2004-09-09 10:23:57 [logging.pl] &lt;D&gt; logging.pl V1.00 ended   --------------------------------------------------</pre>
<p>
</p>
<hr />
<h1><a name="abstract">ABSTRACT</a></h1>
<p>IOToolkit - Perl extension to create logfiles</p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>Provides a human-readable logfile and is ment to replace ``print'' and ``die'' in your programs.</p>
<p>This module was written to provide an easy way to log messages. It
checks for an option --loglevel=EMCDQ- where each character stands 
for a certain level. e.g.</p>
<pre>
   E   = Error
   S   = System
   M   = Message
   D   = Debug
   -   = Silent
   all = All messages</pre>
<p>You can use all characters you would like to use. These are just examples.</p>
<p>the minus (``-'') has a special meaning: supresses output to the screen and
ONLY logs them to the file. Please see the sample script for more details.</p>
<p>The function gettimestamp returns the current time in the format used for the logfile. 
If you specifiy the format &amp;gettimestamp(``filename'') it returns something like
this: 20041009131500</p>
<p>IOToolkit::moduleinfo prints a list of loaded modules.</p>
<p>IOToolkit::trim trims a variable.</p>
<p>IOToolkit::hash2sql creates SQL code to insert a hash into a table.</p>
<p>Example:</p>
<pre>
   use IOToolkit;</pre>
<pre>
   my %hash=(
      firstname=&gt;&quot;Markus&quot;,
      lastname=&gt;&quot;Linke&quot;,
   );</pre>
<pre>
   print IOToolkit::hash2sqlinsert(&quot;tablename&quot;,%hash).&quot;\n&quot;;
   
Result:</pre>
<pre>
   insert (firstname,lastname) values (&quot;Markus&quot;,&quot;Linke&quot;) into tablename</pre>
<p>IOToolkit::sql2data executes SQL statement and creates a array of hashs</p>
<pre>
   use IOToolkit;
   use Data::Dumper;
   print Dumper(IOToolkit::sql2data($dbh,&quot;select * from environments&quot;));</pre>
<p>
</p>
<h2><a name="export">EXPORT</a></h2>
<p>logme and gettimestamp are exported.</p>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<pre>
   <a href="http://www.linke.de">http://www.linke.de</a> for my personal homepage
   <a href="http://www.nmsalert.com">http://www.nmsalert.com</a> for website monitoring solutions
   <a href="http://www.trackalizer.com">http://www.trackalizer.com</a> for website visitor tracking and clickpath analysis</pre>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>Markus Linke, <a href="mailto:markus.linke@linke.de">markus.linke@linke.de</a></p>
<p>
</p>
<hr />
<h1><a name="copyright_and_license">COPYRIGHT AND LICENSE</a></h1>
<p>Copyright 2003-2004 by Markus Linke</p>
<p>This library is free software; you can redistribute it and/or modify
it under the same terms as Perl itself.</p>
<p>
</p>
<hr />
<h1><a name="amendment_history">AMENDMENT HISTORY</a></h1>
<pre>
 $Log:   /hfx/var/pvcs/Murex/archives/Tonys/IOToolkit.pm-arc  $
# 
#    Rev 1.21   29 Oct 2004 08:01:14   ml7tre
# pvcs change
# 
#    Rev 1.20   29 Oct 2004 07:59:30   ml7tre
# Debugging Lines removed
# 
#    Rev 1.19   29 Oct 2004 07:52:28   ml7tre
# version control changes

</pre>

</body>

</html>
